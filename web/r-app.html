<link rel="import" href="packages/polymer/polymer.html">

<link rel="import" href="packages/core_elements/core_drawer_panel.html">
<link rel="import" href="packages/core_elements/core_header_panel.html">
<link rel="import" href="packages/core_elements/core_toolbar.html">
<link rel="import" href="packages/core_elements/core_icon_button.html">
<link rel="import" href="packages/paper_elements/paper_shadow.html">

<link rel="import" href="r-model.html">
<link rel="import" href="r-player.html">
<link rel="import" href="r-tracklist.html">

<polymer-element name="r-app">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
      }
      
      core-header-panel {
        height: 100%;
      }
    </style>
    <r-model albumUrl="{{ albumUrl }}"
             albumTitle="{{ albumTitle }}"
             trackNames="{{ trackNames }}"
             currentTrack="{{ currentTrack }}"></r-model>
    <core-drawer-panel id="drawer-panel">
      <core-header-panel flex main>
      <core-toolbar>
        <!-- FIXME: Hide this button when not in narrow mode -->
        <core-icon-button icon="menu" on-tap="{{openTracklist}}"></core-icon-button>
        <span flex>{{ currentTrack }}</span>
      </core-toolbar>
      <div>
        <paper-shadow></paper-shadow>
        <img src="{{ albumUrl }}" width=400 height=400>
        <r-player></r-player>
      </div>
      </core-header-panel>
      <r-tracklist tracks="{{ trackNames }}" drawer></r-tracklist> 
    </core-drawer-panel>

  </template>
  <script type="application/dart" src="r-app.dart"></script>
</polymer-element>